# 产品描述

## 产品愿景

为 iOS 用户提供一款统一的内容阅读聚合器，通过灵活的规则系统支持从任意网站抓取小说、漫画、视频等内容，并在 Scripting App 平台上提供流畅、沉浸式的阅读体验。

## 核心问题

1. **内容分散** - 用户需要在多个不同的阅读 App 或网站之间切换
2. **体验不一致** - 各网站的阅读体验参差不齐，广告干扰严重
3. **规则兼容性** - 市面上存在多种规则格式（any-reader、Legado），缺乏统一方案
4. **iOS 生态缺失** - iOS 平台缺少类似 Android 上 Legado 这样的开源阅读器

## 解决方案

### Reader 脚本

一个运行在 Scripting App 上的阅读器脚本，提供：

1. **通用规则解析** - 适配 UniversalRule 格式（第三方规则由 reader-source 转换）
2. **多内容类型支持** - 小说、漫画、视频、音频、RSS
3. **完整阅读流程** - 搜索 → 章节列表 → 内容阅读
4. **规则管理** - 导入、编辑、删除、从 URL 更新规则
5. **书架管理** - 收藏书籍、记录阅读进度

## 用户体验

### 典型使用流程

```
用户打开 Reader 脚本
     ↓
书架页面（首页）
 ├── 查看已收藏书籍
 ├── 点击书籍 → 章节列表 → 阅读
 └── 点击「书源」→ 规则管理页面
                      ↓
                 规则管理页面
                  ├── 导入规则（JSON/URL）
                  ├── 选择规则 → 搜索/发现
                  │     ↓
                  │   搜索页面
                  │    └── 输入关键词 → 搜索结果 → 章节列表
                  │                                    ↓
                  │                              阅读页面
                  │                               ├── 上下章切换
                  │                               └── 阅读内容
                  └── 删除规则
```

### 界面特点

1. **原生 iOS 风格** - 使用 SwiftUI 组件，遵循 iOS 设计规范
2. **调试友好** - 每个页面都有调试信息区域，方便排查规则问题
3. **响应式** - 支持 iPhone 和 iPad 布局
4. **Cloudflare 支持** - 自动等待 Cloudflare 验证完成

## 目标用户

1. **轻量阅读用户** - 希望有一个统一的阅读入口
2. **规则创建者** - 熟悉 any-reader/Legado 规则的用户
3. **开发者** - 想要学习 Scripting 平台开发的开发者

## 成功指标

1. 规则解析 - 正确解析 UniversalRule 通用规则格式
2. 用户体验 - 阅读流程流畅，无明显卡顿
3. 稳定性 - 核心功能无崩溃

## 未来规划

- [ ] 阅读器设置（字体大小、背景色、亮度调节）
- [x] 阅读历史记录（通过 lastReadAt 实现）
- [ ] 规则编辑器（可视化编辑规则）
- [ ] 离线缓存（章节内容本地缓存）
- [x] 多设备同步（iCloud 已实现）
- [ ] 规则分享社区
- [ ] 书架分组（按规则/分类/标签分组）
